<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link href="/static/navbar.css" rel="stylesheet" />
    <link href="/static/perfil.css" rel="stylesheet" />
    <title>Perfil - Phoenix Rise</title>

  </head>

  <body>
    <div class="background">
      <!-- ==================== NAVBAR ==================== -->
      <header>
        <div class="logo">
          <img src="/static/imagens/logo_semfundo.png" alt="LOGO PHOENIX RISE" />
          <h1 class="degrade">PHOENIX RISE</h1>
        </div>

        {% include 'links_base.html' %}
      </header>

      <!-- ==================== SEÇÃO PERFIL ==================== -->
      <section class="secao-formulario">
        <div class="perfil-container">
          <div class="perfil-container-inner">

            <!-- FOTO + UPLOAD -->
            <div class="foto-usuario-container">
              <div class="foto-usuario">
                {% if resultado %}
                <img src="{{ resultado }}" alt="Imagem de perfil" />
                {% else %}
                <img src="/static/imagens/user_default.png" alt="Sem foto" />
                {% endif %}
              </div>

              <div class="upload-container">
                <form action="{{ url_for('perfil') }}" method="POST" enctype="multipart/form-data" class="form-imagem" id="form-imagem">
                  <div class="upload-buttons">
                    <label for="imagem_perfil" class="botao-file">Escolher Imagem</label>
                    <button type="submit" class="botao-file">Salvar Imagem</button>
                  </div>

                  <input type="file" name="imagem_perfil" id="imagem_perfil" accept="image/*" />

                  {% if not resultado %}
                  <span id="nome-arquivo">Nenhum arquivo escolhido</span>
                  {% endif %}
                </form>
              </div>
            </div>

            <!-- DADOS DO USUÁRIO -->
            <form action="{{ url_for('perfil') }}" method="POST" class="form-campos">
              <div class="input-container">
                <label for="nome_usuario">NOME</label>
                <input type="text" name="nome_usuario" id="nome_usuario" value="{{ nome_usuario }}" readonly />
              </div>

              <div class="input-container">
                <label for="email">EMAIL</label>
                <input type="email" name="email" id="email" value="{{ email }}" readonly />
              </div>
            </form>
          </div>
        </div>
      </section>

      <!-- ==================== SEÇÃO DE INTERESSES ==================== -->
      <section class="secao-interesses">
        <h2 class="titulo-interesses">MEUS INTERESSES</h2>
        <h3 class="subtitulo-interesses">Selecione seus interesses</h3>

        <form action="{{ url_for('interesses') }}" method="POST">
          <div class="opcoes">

            <label class="opcao">
              <img src="https://images.unsplash.com/photo-1660926655155-8b1f8f9079f5"/>
              <p>FUTEBOL</p>
              <input type="checkbox" name="interesses" value="Futebol" />
            </label>

            <label class="opcao">
              <img src="https://static.todamateria.com.br/upload/ha/nd/handebol-cke.jpg"/>
              <p>HANDEBOL</p>
              <input type="checkbox" name="interesses" value="Handebol" />
            </label>

            <label class="opcao">
              <img src="https://jornalzonasul.com.br/wp-content/uploads/2016/03/Foto-74.jpg"/>
              <p>ARTES MARCIAIS</p>
              <input type="checkbox" name="interesses" value="Artes Marciais" />
            </label>

            <label class="opcao">
              <img src="https://s2.static.brasilescola.uol.com.br/be/2022/08/basquete-feminino.jpg"/>
              <p>BASQUETE</p>
              <input type="checkbox" name="interesses" value="Basquete" />
            </label>

            <label class="opcao">
              <img src="https://img.nsctotal.com.br/wp-content/uploads/2024/06/pessoas-correndo.jpg"/>
              <p>CORRIDA</p>
              <input type="checkbox" name="interesses" value="Corrida" />
            </label>

            <label class="opcao">
              <img src="https://blog.ciaathletica.com.br/wp-content/uploads/2023/08/Cia-Athletica-Ginastica-de-relaxamento-Autores-Grupo-S2-Marketing-Divulgacao-Cia.jpg"/>
              <p>GINÁSTICA</p>
              <input type="checkbox" name="interesses" value="Ginástica" />
            </label>

            <label class="opcao">
              <img src="https://www.oxerbrasil.com.br/wp-content/uploads/2022/09/natacao-misto-fotos-oxer-12-1024x576.jpg.webp"/>
              <p>HIDROGINÁSTICA</p>
              <input type="checkbox" name="interesses" value="Hidroginástica" />
            </label>

            <label class="opcao">
              <img src="https://diariodonordeste.verdesmares.com.br/image/contentid/policy:1.3139049:1632325398/shutterstock_793317166_Easy-Resize.com.jpg"/>
              <p>NATAÇÃO</p>
              <input type="checkbox" name="interesses" value="Natação" />
            </label>

          </div>

          <button type="submit" class="btn-salvar-interesses">
            Salvar interesses
          </button>
        </form>
      </section>
    </div>

    <!-- ==================== SCRIPT ==================== -->
    <script>
      const inputFile = document.getElementById("imagem_perfil");
      const spanNome = document.getElementById("nome-arquivo");
      const formImagem = document.getElementById("form-imagem");

      if (inputFile) {
        inputFile.addEventListener("change", function () {
          const nome = this.files?.[0]?.name || "Nenhum arquivo escolhido";
          if (spanNome) spanNome.textContent = nome;
        });
      }

      if (formImagem) {
        formImagem.addEventListener("submit", () => {
          if (spanNome) spanNome.style.display = "none";
        });
      }

      document.querySelectorAll('.opcao').forEach(opcao => {
        const checkbox = opcao.querySelector('input[type="checkbox"]');

        if (checkbox.checked) {
          opcao.classList.add('selecionado');
        }

        opcao.addEventListener('click', () => {
          checkbox.checked = !checkbox.checked;
          opcao.classList.toggle('selecionado');
        });
      });
    </script>

  </body>
</html>
